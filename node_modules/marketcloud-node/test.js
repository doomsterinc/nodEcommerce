var marketcloud = require('./index.js');


client = new marketcloud.Client({
			//public_key: 'c88b04e9-fcd8-42a8-b68e-38413e024c1b0',
			 public_key: 'c88b04e9-fcd8-42a8-b68e-38413e024c1b',
			 secret_key: '2IAt0pF81JNP3868wgQ5Arg98FMKX/bhut4xViGYj8Y='
			  //secret_key: '2IAt0pF81JNP3868wgQdisj5Arg98FMKX/bhut4xViGYj8Y='
});


client.products.create({
		name : 'Test',
		stock_type : 'track',
		price : 12.59
	})
/*.then(function(response){
	console.log("1 THEN",response);
	return client.products.create({
		name : 'Test',
		stock_type : 'tracko',
		price : 12.59
	})
})*/
.then(function(response){
	console.log("2 then",response);
	//Ora scade il token
	client.token = 'xXxXx';
	return client.products.create({
		name : 'Test',
		stock_type : 'track',
		price : 12.59
	})
})
.then(function(response){
	console.log("3 then ",response)
})
.catch(function(err){
	switch(err.type){
		case 'Unauthorized':
			console.log("Authentication error",err);
		break;
		case 'BadRequest':
			console.log("I sant bad data",err);
		break;
		case 'InternalServerError':
			console.log("Marketcloud is in da trouble",err);
		break;
		default:
			console.log("Boh")
		break;
	}
	//console.log("TEST.JS catch",response)
	//console.log("Ultimo catch",response)
})


//Se passo solo roba andata a buon fine al then
//posso evitare di passare lo status