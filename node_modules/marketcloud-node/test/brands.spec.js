var marketcloud = require('../index.js'),
	mocha = require('mocha'),
	chai = require('chai');

var expect = chai.expect;

var client = null;
var brand_id = null;
describe('Brands',function(){

	before(function(){

		client = new marketcloud.Client({
			public_key : process.env.MARKETCLOUD_PUBLIC_KEY,
    		secret_key : process.env.MARKETCLOUD_SECRET_KEY
		})
	})


	it('Should retrieve a list of brands',function(){
		return client.brands.list({})
			.then(function(response){
				
				expect(response.length).to.not.equal(0);
				expect(response.length).to.be.at.most(20);
				brand_id = response[0].id;

			})
	});


	it('Should retrieve a specific brand',function(){
		return client.brands.getById(brand_id)
			.then(function(response){
				expect(response.id).to.equal(brand_id);
				
			})
	})

	it('Should create a brand',function(){
		var brand = {
			name : 'Vertigo',
			image_url : 'https://upload.wikimedia.org/wikipedia/commons/a/ab/Vertigo-Comics-Logo.svg'
		}
		return client.brands.create(brand)
					.then(function(response){
						var brand_id = response.id
						
					})

	})

	it('Should update a brand',function(){
		var update = {
			name : 'Vertigo Comics'
		}
		return client.brands.update(brand_id,update)
								.then(function(response){
									
								})
	})


	it('Should delete a brand',function(){
		return client.brands.delete(brand_id)
								.then(function(response){
									
								})
	})

	
})
